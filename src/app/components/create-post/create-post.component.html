<main class="container">
    <h2>Criar Nova Notícia</h2>

    <div *ngIf="errorMessage" class="alert alert-danger">
        {{ errorMessage }}
    </div>

    <form [formGroup]="postForm" (ngSubmit)="onSubmit()" novalidate>

        <div class="form-group">
            <label for="title">Título</label>
            <input id="title" type="text" formControlName="title" class="form-control"
                [class.is-invalid]="postForm.get('title')?.invalid && postForm.get('title')?.touched" />
            <div *ngIf="postForm.get('title')?.invalid && postForm.get('title')?.touched" class="text-danger">
                O título é obrigatório.
            </div>
        </div>

        <div class="form-group">
            <label for="image">URL da Imagem</label>
            <input id="image" type="text" formControlName="image" class="form-control"
                [class.is-invalid]="postForm.get('image')?.invalid && postForm.get('image')?.touched" />
            <div *ngIf="postForm.get('image')?.invalid && postForm.get('image')?.touched" class="text-danger">
                A URL da imagem é obrigatória.
            </div>
        </div>

        <div class="form-group">
            <label for="body">Corpo da Notícia</label>
            <textarea id="body" rows="5" formControlName="body" class="form-control"
                [class.is-invalid]="postForm.get('body')?.invalid && postForm.get('body')?.touched"></textarea>
            <div *ngIf="postForm.get('body')?.invalid && postForm.get('body')?.touched" class="text-danger">
                O corpo da notícia é obrigatório.
            </div>
        </div>

        <div class="form-group">
            <label for="createdAt">Data de Criação</label>
            <input id="createdAt" type="date" formControlName="createdAt" class="form-control"
                [class.is-invalid]="postForm.get('createdAt')?.invalid && postForm.get('createdAt')?.touched" />
        </div>


        <button type="submit" class="btn" [disabled]="isSubmitting">
            {{ isSubmitting ? 'Cadastrando...' : 'Cadastrar Notícia' }}
        </button>
    </form>

    <a routerLink="/posts">Voltar à listagem de posts</a>
</main>